# 1. Проблема и цель проекта

Проблема - при проведении ВПИ разных эпох, возникает потребность в разных 
формах взаимосвязей и полей предметов.

Цель проекта - разработать конструктор с помощью которого можно будет создать 
свои предметы со своими полями, а также создание настраиваемых взаимосвязей 
между предметами по типу необходимых для покупки предметов

# 2. Описание конструктора

Конструктор состоит из следующих функциональных блоков:

1. Создание предметов
2. Создание магазинов и инвентарей для каждого типа предметов
3. Создание стран и функционала для них

## 2.1.1. Создание предметов

Предметы можно будет создавать унаследовав специальный метакласс Item, поля 
предмета будут указаны в качестве атрибутов. Если поле предмета требует более 
точной настройки, необходимо будет указать в качестве значения по умолчанию
экземпляр Field, для простых полей можно использовать стандартные типы

Также будет возможность настраивать поведение предмета с помощью специального атрибута
`_properties` в котором указывается Iterable[Property]

Синтаксис создаваемых полей должен быть похож на синтаксис data-builders:
```python
class Build(Item):
    _properties = (CanSell, )

    name: str = Field(unique=True)
    price: Price
    group: Group[str] = ''
```

## 2.1.2. Конфликты между другими частями конструктора

Для таких структур как магазин или подобных, будут иметь собственные поля по 
типу Price, если же таких нет, то предметы не будут иметь возможность к 
взаимодействию со структурами, в случае магазина, предмет нельзя будет покупать

## 2.1.3. Field

Класс для указания дополнительных свойств полю, сигнатура создания класса:
```python
SQL_QUERIES = Iterator[str]

Field(*, display_in_shop: bool = True,
         display_in_inventory: bool = True,
         unique: bool = False, 
         checks: SQL_QUERIES = MISSING, 
         triggers: SQL_QUERIES = MISSING
)
```
По большей части данные параметры направленны для базы данных

Проверки и триггеры должны будут передаваться на языке SQL в виде строк

## 2.1.4. Специальные поля

Должны будут существовать специальные поля. Таких как Group, ниже приведен их список с пояснениями,
каждое специальное поле может только один раз встречаться в предмете

- Group[Any] создает поле по которому будут группироваться предметы в магазине
- SaleAbility

Поля взаимосвязи
 - NeededForPurchase[Item, ...], если будет указан, то можно покупать в магазине
 - ItemConsumption[Item, ...]

Поля структур
 - Price[Numeric] для магазинов
 - BuyAbility для магазинов

 - MaxCount для инвентарей

Такие поля будут наследовать Field, что даст возможность другим людям создавать свои спец. поля

## 2.1.5. Properties

Различные свойства для предметов, наследующие ItemProperty, такие классы будут
добавлять методы для предмета. Специальные поля также могут добавить свойства
если это необходимо для их работы

## 2.2.1. Создание магазинов и инвентарей для предметов

Для каждого предмета будут созданы магазин(даже если предмет нельзя купить) и инвентарь

## 2.2.2. Магазины

Информацию о предмете типа Mapping, магазин должен выдавать в 
соответствии с последовательностью полей при создании предмета

В случае невозможности покупки магазин будет играть информативную роль для просмотра
информации о предмете

## 2.2.3. Инвентари

Инвентарь будет содержать всю информацию о предмете кроме полей для магазина, а
также добавлять свое поле - Count, отражающее количество предмета в инвентаре игрока

## 2.3.1. Страны

Для создания стран необходимо унаследовать метакласс Country, в нем тоже можно 
иницализировать поля по типу `name: str, id: str` и использовать Field как для предметов

Также необходимы специальные поля для альянсов и баланса страны

Автоматически создается поле Balance

## 2.3.2. Функционал

Изначально страны могут только покупать предметы, но их функционал можно расширить
с помощью `_properties` как и в случае с предметами. Особенность заключается в 
том, что страны и предметы будут иметь общие параметры класса Property, которые
можно передавать в упомянутый аргумент

Также существуют специальные параметры только для стран - CountryProperty от
которых можно наследоваться и создать свой функционал

# 3. Предлагаемый стек технологий

- Python
- PostgreSQL
- asyncpg для работы с базой данных
